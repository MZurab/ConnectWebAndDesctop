<div  id="msgId-testToMeLiveVideo"  class="messagesInChatView  toMeMessageInChatView msgTypeLiveVideo" time-sent="1506547620161" time-read="1506942475666" time-delivered="1506547622905" connect_msg="-Kv4DwptnorsExzZ3t_P" connect-appear-scroll-parent="#leftBlockInViewWindow" connect-appear-my-parent=".ChatViewInAppWindow">
   <div class="lineInToMeMessage">
      <div class="lineInBoxInLine">
         <div class="topCircleInMessages"></div>
         <div class="timeTopInMessages">00:27</div>
         <div class="botCircleInMessages" title="00:27"></div>
         <div class="timeBotInMessages">14:07</div>
      </div>
   </div>
   <div class="aCpI_msgLiveVideo_contentLiveVideoInToMeMessage">
      <div class="aCpI_msgLiveVideo_videoMsgContent" onmouseenter="aCpI_msgLiveVideo_onEventMouseEnter(this)" onmouseleave="aCpI_msgLiveVideo_onEventMouseLeave(this)">
      	 <div class='aCpI_msgLiveVideo_viewWhenLoadingVideoLiveMsg'></div>
      	 <div class='aCpI_msgLiveVideo_msgNowVideoTime'></div>
         <div class="aCpI_msgLiveVideo_backgroundPlayVideoOnHover aCpI_msgLiveVideo_backgroundVideoOnHover" onclick='aCpI_msgLiveVideo_onEventClickForBackground(this)'></div>
         <!-- <div class="aCpI_msgLiveVideo_backgroundPauseVideoOnHover aCpI_msgLiveVideo_backgroundVideoOnHover"></div> -->
         <video ontimeupdate='aCpI_msgLiveVideo_onEventTimeUpdateVideo(this)' onloadeddata='aCpI_msgLiveVideo_onEventLoadedDataVideo(this)' onplay='aCpI_msgLiveVideo_onEventPlayVideo(this)' onpause='aCpI_msgLiveVideo_onEventPauseVideo(this)' src="https://firebasestorage.googleapis.com/v0/b/connect-9109d.appspot.com/o/public%2Fv1.webm?alt=media&amp;token=a9eb0725-5858-49fa-bcbe-bed25b147585" class="liveVideoSrc"></video>
      </div>
   </div>
</div>


<div id="msgId-testFromMeLiveVideo" class="messagesInChatView  fromMeMessageInChatView msgTypeLiveVideo" time-sent="1506942474415" connect_msg="-KvRlKUou5M46B7n6P4S" connect-appear-scroll-parent="#leftBlockInViewWindow" connect-appear-my-parent=".ChatViewInAppWindow">
   <div class="lineInFromMeMessage">
      <div class="lineInBoxInLine">
         <div class="topCircleInMessages"></div>
         <div class="timeTopInMessages">14:07</div>
         <div class="botCircleInMessages" style="display:none;"></div>
         <div class="timeBotInMessages" style="display:none;"></div>
      </div>
   </div>
   <div class="aCpI_msgLiveVideo_contentLiveVideoInFromMeMessage">
      <div class="aCpI_msgLiveVideo_videoMsgContent" onmouseenter="aCpI_msgLiveVideo_onEventMouseEnter(this)" onmouseleave="aCpI_msgLiveVideo_onEventMouseLeave(this)">
      	 <div class='aCpI_msgLiveVideo_viewWhenLoadingVideoLiveMsg'></div>
      	 <div class='aCpI_msgLiveVideo_msgNowVideoTime'></div>
         <div class="aCpI_msgLiveVideo_backgroundPlayVideoOnHover aCpI_msgLiveVideo_backgroundVideoOnHover" onclick='aCpI_msgLiveVideo_onEventClickForBackground(this)'></div>
         <!-- <div class="aCpI_msgLiveVideo_backgroundPauseVideoOnHover aCpI_msgLiveVideo_backgroundVideoOnHover"></div> -->
         <video ontimeupdate='aCpI_msgLiveVideo_onEventTimeUpdateVideo(this)' onloadeddata='aCpI_msgLiveVideo_onEventLoadedDataVideo(this)' onplay='aCpI_msgLiveVideo_onEventPlayVideo(this)' onpause='aCpI_msgLiveVideo_onEventPauseVideo(this)' src="https://firebasestorage.googleapis.com/v0/b/connect-9109d.appspot.com/o/public%2Fv1.webm?alt=media&amp;token=a9eb0725-5858-49fa-bcbe-bed25b147585" class="liveVideoSrc"></video>
      </div>
   </div>
</div>



<style type="text/css">
	/*@< codeKey = aCpI - appChatPageIndex  */
		.aCpI_msgLiveVideo_contentLiveVideoInToMeMessage {
		    margin-top: 0.25rem;
		    display: table;
		    padding: 0.5rem;
		    max-width: 80%;
		    background: white;
		    margin-left: 0.9rem;
		    margin-bottom: 0.25rem;
		    border-radius: 0 0.3rem 0.3rem 0;
		    font-size: 1.2rem;
		}
		.aCpI_msgLiveVideo_contentLiveVideoInFromMeMessage {
		    margin-top: 0.25rem;
		    display: table;
		    padding: 0.5rem;
		    max-width: 80%;
		    background: white;
		    margin-right: 0.9rem;
		    margin-bottom: 0.25rem;
		    border-radius: 0.3rem 0 0 0.3rem;
		    font-size: 1.2rem;
		    float: right;
		}
			.aCpI_msgLiveVideo_videoMsgContent {
				min-width: 10rem;
				min-height: 10rem;
			    max-width: 20rem;
			    max-height: 20rem;
			    position: relative;
			}

				.aCpI_msgLiveVideo_msgNowVideoTime {
				    position: absolute;
				    bottom: 0.25rem;
				    left: 0.25rem;
				    color: white;
				    font-size: 1rem;
				    text-shadow: 1px 1px 2px black, 0 0 1em black;
				}
				.aCpI_msgLiveVideo_viewWhenLoadingVideoLiveMsg {
				    background-image: url(https://cdn.ramman.net/images/gif/loader.min.gif);
				    position: absolute;
				    z-index: 3;
				    width: 100%;
				    height: 100%;
				    background-position: center center;
				    background-repeat: no-repeat;
				    background-color: #e2eff2;
				}

				.aCpI_msgLiveVideo_backgroundPlayVideoOnHover {
				    background-image: url(https://cdn.ramman.net/web/res/images/icons/player/play_128x128_50.png);
				}
				.aCpI_msgLiveVideo_backgroundPauseVideoOnHover {
				    background-image: url(https://cdn.ramman.net/web/res/images/icons/player/pause_128x128_50.png);
				}
				.aCpI_msgLiveVideo_backgroundVideoOnHover {
				    z-index: 2;
				    width: 100%;
				    height: 100%;
				    background-color: rgba(255, 255, 255, 0.85);
				    position: absolute;
				    cursor: pointer;
				    background-position: center center;
				    background-repeat: no-repeat;
				}
	/*@> codeKey = aCpI - appChatPageIndex  */
</style>

<script type="text/javascript">
	//@< global
		function aCpI_msg_pauseAllOtherPlayingAudioOrVideoEl () {
			$('.flagForSearchPlayingAudioOrVideo').each(
				function (i,thisEl)  {
					$(this).get(0).pause()
				}
			);
		}
	//@> global

	//@< codeKey = appChatPageIndex - aCpI
		function aCpI_msgLiveVideo_onEventMouseEnter (iNthis) {
			/*
	  			@discr
	  				for '.aCpI_msgLiveVideo_videoMsgContent' event mouser enter -> we show pause/play btn block
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
	  		$(iNthis).children('.aCpI_msgLiveVideo_backgroundVideoOnHover').show();
		}
		function aCpI_msgLiveVideo_onEventMouseLeave (iNthis) {
			/*
	  			@discr
	  				for '.aCpI_msgLiveVideo_videoMsgContent' event mouser leave -> we hide pause/play btn block
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
	  		$(iNthis).children('.aCpI_msgLiveVideo_backgroundVideoOnHover').hide();
		}

		function aCpI_msgLiveVideo_onEventPlayVideo (iNthis) {
			/*
	  			@discr
	  				for video '.liveVideoSrc' event onplay video -> we change btn pause TO play (adding class)
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
			// pause all other now playing video and audio 
	  		aCpI_msgLiveVideo_pauseAllOtherPlayingAudioOrVideoEl();

	  		let backElement = $(iNthis).closest('.aCpI_msgLiveVideo_videoMsgContent').find('.aCpI_msgLiveVideo_backgroundVideoOnHover');
	  		//del
	  		$(backElement).removeClass('aCpI_msgLiveVideo_backgroundPlayVideoOnHover').addClass('aCpI_msgLiveVideo_backgroundPauseVideoOnHover')

	  		// add flag by addClass 'flagForSearchPlayingAudioOrVideo' && 'flagForSearchPlayingLiveVideo'
	  		aCpI_msgLiveVideo_addPlayingFlags(iNthis);
		}

			
			function aCpI_msgLiveVideo_addPlayingFlags (iNthis) {
				/*
		  			@discr
		  				add flag by addClass 'flagForSearchPlayingAudioOrVideo' && 'flagForSearchPlayingLiveVideo'
		  			@inputs
		  				@required
		  					iNthis -> object (this video el)
		  		*/
		  		$(iNthis)
		  			.addClass('flagForSearchPlayingAudioOrVideo')
		  			.addClass('flagForSearchPlayingLiveVideo');
			}

		function aCpI_msgLiveVideo_onEventPauseVideo (iNthis) {
			/*
	  			@discr
	  				for video '.liveVideoSrc' event onpause video -> we change btn play TO pause (adding class)
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
	  		let backElement = $(iNthis).closest('.aCpI_msgLiveVideo_videoMsgContent').find('.aCpI_msgLiveVideo_backgroundVideoOnHover');
	  		//del
	  		$(backElement)
	  			.removeClass('aCpI_msgLiveVideo_backgroundPauseVideoOnHover')
	  			.addClass('aCpI_msgLiveVideo_backgroundPlayVideoOnHover');


	  		// dell flag by removeClass 'flagForSearchPlayingAudioOrVideo' && 'flagForSearchPlayingLiveVideo'
	  		aCpI_msgLiveVideo_delPlayingFlags(iNthis);
		}
			function aCpI_msgLiveVideo_delPlayingFlags (iNthis) {
				/*
		  			@discr
		  				delete flag by removeClass 'flagForSearchPlayingAudioOrVideo' && 'flagForSearchPlayingLiveVideo'
		  			@inputs
		  				@required
		  					iNthis -> object (this video el)
		  		*/
	  			$(iNthis)
		  			.removeClass('flagForSearchPlayingAudioOrVideo')
		  			.removeClass('flagForSearchPlayingLiveVideo');
			}
		function aCpI_msgLiveVideo_onEventLoadedDataVideo (iNthis) {
			/*
	  			@discr
	  				for video '.liveVideoSrc' event onpause video -> we change btn play TO pause (adding class)
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
	  		let loadingEl = $(iNthis).closest('.aCpI_msgLiveVideo_videoMsgContent').find('.aCpI_msgLiveVideo_viewWhenLoadingVideoLiveMsg').hide();
		}

		function aCpI_msgLiveVideo_onEventTimeUpdateVideo (iNthis) {
			/*
	  			@discr
	  				for video '.liveVideoSrc' event onpause video -> we change btn play TO pause (adding class)
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/

	  		// set current time for this video
	  		var currentTime 	= (iNthis.currentTime * 1000) || 0;
	  		var textCurrentTime = moment(currentTime).format('mm:ss');
	  		let parent = $(iNthis).closest('.aCpI_msgLiveVideo_videoMsgContent').find('.aCpI_msgLiveVideo_msgNowVideoTime').html(textCurrentTime);
		}


		function aCpI_msgLiveVideo_onEventClickForBackground (iNthis) {
			/*
	  			@discr
	  				for video '.liveVideoSrc' event onpause video -> we change btn play TO pause (adding class)
	  			@inputs
	  				@required
	  					iNthis -> object (this)
	  		*/
	  		var isPauseBtn = $(iNthis).hasClass('aCpI_msgLiveVideo_backgroundPauseVideoOnHover');
	  		var videoEl = $(iNthis).next().get(0);
	  		if( isPauseBtn ) {
	  			// pause this video
	  			videoEl.pause()
	  		} else {
	  			// play this video
	  			videoEl.play()

	  		}
		}

	//@> codeKey = appChatPageIndex - aCpI
</script>